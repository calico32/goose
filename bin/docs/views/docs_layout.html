{{template "_layout.html" .}}

{{define "title"}}{{block "docs-title" .}}{{end}} | goose{{end}}

{{define "main"}}
<div class="flex flex-row max-h-[calc(100dvh-3rem)]">
  <aside class="bg-zinc-800 p-4 z-10 overflow-y-scroll">
    <nav data-selected="{{ .Path }}" id="docs-nav" class="w-48">
      <ul>
        <li class="navheader !mt-0">
          GOOSE DOCUMENTATION
        </li>
        <li>
          <a href="/docs" class="navlink">Overview</a>
        </li>

        <li class="navheader">
          LANGUAGE DOCUMENTATION
        </li>
        <li>
          <a href="/docs/language" class="navlink">Overview</a>
        </li>
        <li>
          <a href="/docs/language/tour" class="navlink">Language Tour</a>
        </li>
        <li>
          <a href="/docs/language/syntax" class="navlink">Syntax</a>
        </li>

        <li class="navheader">
          API REFERENCE
        </li>
        <li>
          <a href="/docs/api" class="navlink">Overview</a>
        </li>
        <li>
          <div data-href="/docs/api/builtin" class="navlink">

            <a href="/docs/api/builtin">Built-in Functions</a>
            <button class="navgroup-toggle open">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#fafafa" viewBox="0 0 256 256">
                <path
                  d="M228,128a12,12,0,0,1-12,12H140v76a12,12,0,0,1-24,0V140H40a12,12,0,0,1,0-24h76V40a12,12,0,0,1,24,0v76h76A12,12,0,0,1,228,128Z">
                </path>
              </svg>
          </div>
          <ul>
            {{range .Builtins}}
            <li>
              <a href="/docs/api/builtin/{{.Name}}" class="navlink">{{.Label}}</a>
            </li>
            {{end}}
          </ul>
        </li>
        <li>
          <div data-href="/docs/api/std" class="navlink">
            <a href="/docs/api/std">Standard Library</a>
            <button class="navgroup-toggle open">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#fafafa" viewBox="0 0 256 256">
                <path
                  d="M228,128a12,12,0,0,1-12,12H140v76a12,12,0,0,1-24,0V140H40a12,12,0,0,1,0-24h76V40a12,12,0,0,1,24,0v76h76A12,12,0,0,1,228,128Z">
                </path>
              </svg>
            </button>
          </div>
          <ul>
            {{range .StandardLibrary}}
            <li>
              <a href="/docs/api/std/{{.Name}}" class="navlink">std:{{.Name}}</a>
            </li>
            {{end}}
          </ul>
        </li>
      </ul>
    </nav>
  </aside>
  <main class="p-4 overflow-y-scroll flex-1">
    {{block "docs-content" .}}{{end}}
  </main>
</div>
{{end}}

{{define "scripts"}}
<script>
  const nav = document.getElementById('docs-nav');
  const selected = nav.getAttribute('data-selected');
  const links =
    [
      ...nav.querySelectorAll('a'),
      ...nav.querySelectorAll('[data-href]'),
      ...nav.querySelectorAll('.navlink')
    ]
  links.forEach(link => {
    if (link.getAttribute('href') === selected || link.getAttribute('data-href') === selected) {
      link.classList.add('selected');
    }
  });
</script>
<script>
  const navGroupToggles = document.querySelectorAll('.navgroup-toggle');
  navGroupToggles.forEach(toggle => {
    toggle.addEventListener('click', () => {
      const parent = toggle.parentElement.parentElement;
      const ul = parent.querySelector('ul');
      if (ul.style.display === 'none') {
        ul.style.display = 'block';
        toggle.classList.add('open');
      } else {
        ul.style.display = 'none';
        toggle.classList.remove('open');
      }
    });
  });
</script>
{{block "docs-scripts" .}}{{end}}
{{end}}
